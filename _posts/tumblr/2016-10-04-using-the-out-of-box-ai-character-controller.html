---
layout: post
title: Using the out of box AI Character Controller
date: '2016-10-04T05:10:07+13:00'
tags:
- Unity3d
- AICharacterControl
- AICharacterController
- NavMesh
- AI
tumblr_url: http://blog.jono.tech/post/151329128880/using-the-out-of-box-ai-character-controller
---
<p>I have been thinking about making a game lately that features an AI robot character. But this morning I had the idea to reverse the roles.</p><p>Long story short here is my experience using the AI Controller in Unity. Below is a short video of the end result.</p><figure class="tmblr-embed tmblr-full" data-provider="youtube" data-orig-width="540" data-orig-height="304" data-url="https%3A%2F%2Fyoutu.be%2FRvhoRRkUuT8"><iframe width="540" height="304" id="youtube_iframe" src="https://www.youtube.com/embed/RvhoRRkUuT8?feature=oembed&amp;enablejsapi=1&amp;origin=https://safe.txmblr.com&amp;wmode=opaque" frameborder="0" allowfullscreen=""></iframe></figure><p>The drone follows me uses the <code>AICharacterControl.cs</code> class provided in the Unity Standard Assets. And it’s pretty easy to get it set up.</p><p>Drag the <code>AIThirdPersonController.prefab</code> into your scene. I swapped out the Ethan model for a free drone asset that I found.</p><p>Piece of cake right? All we do is add a target for our AI to follow or move towards.</p><figure data-orig-width="692" data-orig-height="110" class="tmblr-full"><img src="http://68.media.tumblr.com/09578bbad7f2b3540f32d0b84bd4eaf9/tumblr_inline_oeiloiYgPy1qil7jn_540.png" alt="image" data-orig-width="692" data-orig-height="110"/></figure><p>Not quite. I got the error </p><p><code>"GetRemainingDistance" can only be called on an active agent that has been placed on a NavMesh</code>. </p><p>Don’t know what a NavMesh is? I certainly didn’t.</p><p>A NavMesh is the approximation of walkable surfaces of a level. Not so important for a player, but incredibly useful for an AI to help it from falling down holes or getting stuck. They will look something like this&hellip;</p><figure data-orig-width="1246" data-orig-height="808" class="tmblr-full"><img src="http://68.media.tumblr.com/d11bf027864e37cb0a48d9e62bfd966b/tumblr_inline_oeilp5urJk1qil7jn_540.png" alt="image" data-orig-width="1246" data-orig-height="808"/></figure><p>Luckily Unity has got a pretty easy to use tool to help you generate this based on any gameobjects you have in your scene.<br/></p><p><a href="https://docs.unity3d.com/Manual/nav-BuildingNavMesh.html" target="_blank">In the Docs there are some instructions</a> that got me up and running pretty quick.</p><p>For consistency set up your NavMesh Agent’s radius, height and base offset before you start on the NavMesh. Make sure you use those values in the tool when get to baking the mesh.</p><p>I had it easy in that a drone can pretty much go anywhere, you might need to be stricter depending on your character.</p><p>Your AI character should now be moving around all on its own.</p><p>I spent a good half hour tweaking the steering settings till I found something I was happy with.</p><figure data-orig-width="556" data-orig-height="234" class="tmblr-full"><img src="http://68.media.tumblr.com/ee3b93e3d02535928e3e5d633e31af71/tumblr_inline_oeimfeytD41qil7jn_540.png" alt="image" data-orig-width="556" data-orig-height="234"/></figure><p>Now it is down to you to take it as far as you need. Unity NavMeshes use A* to calculate the shortest path. It also allows you to modify the NavMesh with different types of layer masks and apply costs to each mask. This is how you would make your AI avoid the water if it would slow them down.</p><p>Pretty damn cool stuff :D</p>
